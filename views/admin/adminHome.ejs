<!DOCTYPE HTML>
<html lang="en">


<!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:32:35 GMT -->
<head>
    <meta charset="utf-8">
    <title><%= locals.title ? title: 'Admin Home' %></title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="static/assets1/imgs/theme/favicon.svg">
    <!-- Template CSS -->
    <link href="static/assets1/css/main.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
</head>

<body>
    <div class="screen-overlay"></div>
    <aside class="navbar-aside" id="offcanvas_aside">
        <div class="aside-top">
            <a href="index.html" class="brand-wrap">
                <img src="static/assets1/imgs/theme/logo.svg" class="logo" alt="Evara Dashboard">
            </a>
            <div>
                <button class="btn btn-icon btn-aside-minimize"> <i class="text-muted material-icons md-menu_open"></i> </button>
            </div>
        </div>
        <nav>
            <ul class="menu-aside">
                <li class="menu-item active">
                    <a class="menu-link" href="/admin"> <i class="icon material-icons md-home"></i>
                        <span class="text">Dashboard</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/product"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">Products</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" disabled href="/admin/Category"> <i class="icon material-icons md-pie_chart"></i>
                        <span class="text">Category</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/brand"> <i class="icon material-icons md-stars"></i>
                        <span class="text">Brands</span> </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/orders"> <i class="icon material-icons md-shopping_cart"></i>
                        <span class="text">Orders</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/coupon"> <i class="icon material-icons md-monetization_on"></i>
                        <span class="text">Coupon</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/bestselling"> <i class="icon material-icons md-store"></i>
                        <span class="text">Best Selling</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="/admin/customer"> <i class="icon material-icons md-person"></i>
                        <span class="text">Customers</span>
                    </a>
                </li>
            <hr>
            <ul class="menu-aside">
                <li class="menu-item">
                    <a class="menu-link" href="/adminlogout"> <i class="icon material-icons md-local_offer"></i>
                        <span class="text">Logout</span>
                    </a>
                </li>
            </ul>
            <br>
            <br>
        </nav>
    </aside>

    
    <main class="main-wrap">
        <header class="main-header navbar">
            <div class="col-search">
                <form class="searchform">
                    <div class="input-group">
                        <input list="search_terms" type="text" class="form-control" placeholder="Search term">
                        <button class="btn btn-light bg" type="button"> <i class="material-icons md-search"></i></button>
                    </div>
                    <datalist id="search_terms">
                        <option value="Products">
                        <option value="New orders">
                        <option value="Apple iphone">
                        <option value="Ahmed Hassan">
                    </datalist>
                </form>
            </div>
            <div class="col-nav">
                <button class="btn btn-icon btn-mobile me-auto" data-trigger="#offcanvas_aside"> <i class="material-icons md-apps"></i> </button>
                <ul class="nav">
                    <li class="nav-item">
                        <a class="nav-link btn-icon" href="#">
                            <i class="material-icons md-notifications animation-shake"></i>
                            <span class="badge rounded-pill">3</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn-icon darkmode" href="#"> <i class="material-icons md-nights_stay"></i> </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="requestfullscreen nav-link btn-icon"><i class="material-icons md-cast"></i></a>
                    </li>
                    <li class="dropdown nav-item">
                        <a class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownLanguage" aria-expanded="false"><i class="material-icons md-public"></i></a>
                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownLanguag3q1e">
                            <a class="dropdown-item text-brand" href="#"><img src="static/assets1/imgs/theme/flag-us.png" alt="English">English</a>
                            <a class="dropdown-item" href="#"><img src="static/assets1/imgs/theme/flag-fr.png" alt="Français">Français</a>
                            <a class="dropdown-item" href="#"><img src="static/assets1/imgs/theme/flag-jp.png" alt="Français">日本語</a>
                            <a class="dropdown-item" href="#"><img src="static/assets1/imgs/theme/flag-cn.png" alt="Français">中国人</a>
                        </div>
                    </li>
                    <li class="dropdown nav-item">
                        <a class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownAccount" aria-expanded="false"> <img class="img-xs rounded-circle" src="static/assets1/imgs/people/avatar2.jpg" alt="User"></a>
                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownAccount">
                            <a class="dropdown-item" href="#"><i class="material-icons md-perm_identity"></i>Edit Profile</a>
                            <a class="dropdown-item" href="#"><i class="material-icons md-settings"></i>Account Settings</a>
                            <a class="dropdown-item" href="#"><i class="material-icons md-account_balance_wallet"></i>Wallet</a>
                            <a class="dropdown-item" href="#"><i class="material-icons md-receipt"></i>Billing</a>
                            <a class="dropdown-item" href="#"><i class="material-icons md-help_outline"></i>Help center</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item text-danger" href="#"><i class="material-icons md-exit_to_app"></i>Logout</a>
                        </div>
                    </li>
                </ul>
            </div>
        </header>
        <section class="content-main">
            <div class="content-header">
                <div>
                    <h2 class="content-title card-title">Dashboard </h2>
                    <p>Whole data about your business here</p>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-3" style="width: 29%;">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-primary-light"><i class="text-primary material-icons md-monetization_on"></i></span>
                            <div class="text">
                                <h6 class="mb-1 card-title">Total Orders Amount</h6>
                                <span>Rs. <%= orderAmount %>.00  </span>
                            </div>
                        </article>
                    </div>
                </div>
                <div class="col-lg-3" >
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-success-light"><i class="text-success material-icons md-local_shipping"></i></span>
                            <div class="text">
                                <h7 class="mb-1 card-title"><b>Total Completed Orders </b></h7> <span> <%= count %> </span>
                            </div>
                        </article>
                    </div>
                </div>
                <div class="col-lg-3" style="width: 31%;">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                            <div class="text">
                                <h6 class="mb-1 card-title">Overall Discount</h6> <span>Rs. <%= discountAmount %>.00 </span>
                            </div>
                        </article>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8">
                  <div class="card mb-4">
                    <article class="card-body">
                      <h5 class="card-title">Sale statistics</h5>
                      <div>
                        <a href="#" class="mx-2" id="monthGraphBtn">
                          <i class="text-muted material-icons md-show_chart"></i>Month Graph
                        </a>
                        <a href="#" class="" id="yearGraphBtn">
                          <i class="text-muted material-icons md-show_chart"></i>Year Graph
                        </a>
                      </div>
                      <canvas id="lineChart" height="120px"></canvas>
                    </article>
                  </div>
                </div>
              <div class="col-lg-4">
                <div class="container">
                    <div class="card mb-4">
                        <article class="card-body">
                            <h5 class="card-title">Payment Statistics</h5>
                            <canvas id="orderChart" height="120px"></canvas>
                        </article>
                    </div>
                </div>
              </div>
            </div>
            <div class="card mb-4">
                <header class="card-header">
                    <h4 class="card-title">Sales Report</h4>
                    <div class="row align-items-center">    
                        <div class="col-lg-7">
                            <div class="d-flex align-items-center mb-3">
                                <label for="startDate" class="me-2">Start Date:</label>
                                <input type="date" id="startDate" class="form-control me-2">
                                <label for="endDate" class="me-2">End Date:</label>
                                <input type="date" id="endDate" class="form-control me-2">
                            </div>
                            <span id="dateError" style="color: red;"></span>
                            <br>
                            <br>
                            <div class="d-flex align-items-center gap-3 mb-3">
                                <button class="btn btn-primary" id="yearlyReportButton">Yearly Report</button>
                                <button class="btn btn-primary" id="weeklyReportButton">Weekly Report</button>
                                <button class="btn btn-primary" id="todayReportButton">Today's Report</button>
                            </div>
                            <div class="d-flex align-items-center mb-3">
                                <button class="btn btn-primary" id="createReportButton">Create Report</button>
                            </div>
                            <div class="d-flex align-items-center gap-3">
                                <a>
                                    <button id="downloadButton" class="btn btn-primary" style="display: none;" onclick="downloadPdf()">
                                        <i class="text-muted material-icons md-download"></i>Download Report
                                    </button>
                                </a>
                                <a>
                                    <button id="downloadExcelButton" class="btn btn-primary" style="display: none;" onclick="downloadExcel()">
                                        <i class="text-muted material-icons md-download"></i>Download Excel
                                    </button>
                                </a>
                            </div>
                          </div>
                        </div>
                    </div>
                </header>
                <div class="card-body"  >
                    <div class="table-responsive" >
                        <div class="table-responsive"  >
                            <table class="table align-middle table-nowrap mb-0" id="reportContainer">
                                <thead class="table-light">
                                    <tr>
                                        <th scope="col" class="text-center">#</th>
                                        <th class="align-middle" scope="col">Order ID</th>
                                        <th class="align-middle" scope="col">Customer Name</th>
                                        <th class="align-middle" scope="col">Address</th>
                                        <th class="align-middle" scope="col">Date</th>
                                        <th class="align-middle" scope="col">Total</th>
                                        <th class="align-middle" scope="col">Payment Status</th>
                                        <th class="align-middle" scope="col">Payment Method</th>
                                        <th class="align-middle" scope="col">Products</th>
                                    </tr>
                                </thead>
                                <input type="hidden" id="createReportButton">
                                <tbody id="reportTableBody">
                                    <% order.forEach((row, index) => { %>
                                        <tr>
                                            <td class="text-center">
                                                <span><%= index + 1 %></span>
                                            </td>
                                            <td>#<%= row._id %></td>
                                            <td><%= row.billingdetails.name %></td>
                                            <td><%= row.billingdetails.city %></td>
                                            <td><%= row.orderDate %></td>
                                            <td><%= row.totalprice %></td>
                                            <td><%= row.paymentMethod %></td>
                                            <td><%= row.totalprice %></td>
                                            <td>
                                                <% row.items.forEach(item => { %>
                                                    <%= item.product.productname %><br>
                                                <% }) %>
                                            </td>
                                        </tr>
                                    <% }) %>
                                </tbody>                                 
                            </table>
                        </div>
                    </div>  
                </div>
            </div>
            </div>
            <div class="pagination-area mt-30 mb-50">
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-start">
                        <li class="page-item active"><a class="page-link" href="#">01</a></li>
                        <li class="page-item"><a class="page-link" href="#">02</a></li>
                        <li class="page-item"><a class="page-link" href="#">03</a></li>
                        <li class="page-item"><a class="page-link dot" href="#">...</a></li>
                        <li class="page-item"><a class="page-link" href="#">16</a></li>
                        <li class="page-item"><a class="page-link" href="#"><i class="material-icons md-chevron_right"></i></a></li>
                    </ul>
                </nav>
            </div>
        </section> <!-- content-main end// -->
        <footer class="main-footer font-xs">
            <div class="row pb-30 pt-15">
                <div class="col-sm-6">
                    <script>
                    document.write(new Date().getFullYear())
                    </script> ©, Evara - HTML Ecommerce Template .
                </div>
                <div class="col-sm-6">
                    <div class="text-sm-end">
                        All rights reserved
                    </div>
                </div>
            </div>
        </footer>
    </main>
    <script src="static/assets1/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="static/assets1/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="static/assets1/js/vendors/select2.min.js"></script>
    <script src="static/assets1/js/vendors/perfect-scrollbar.js"></script>
    <script src="static/assets1/js/vendors/jquery.fullscreen.min.js"></script>
    <script src="static/assets1/js/vendors/chart.js"></script>
    <!-- Main Script -->
    <script src="static/assets1/js/main.js" type="text/javascript"></script>
    <script src="static/assets1/js/custom-chart.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- html2canvas CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- jsPDF CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" integrity="sha512-qZvrmS2ekKPF2mSznTQsxqPgnpkI4DNTlrdUmTzrDgektczlKNRRhy5X5AAOnx5S09ydFYWWNSfcEqDTTHgtNA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- XLSX CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.0/xlsx.full.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#yearlyReportButton').click(function () {
                const currentDate = new Date();
                const previousMonthStart = new Date(currentDate.getFullYear()-1, currentDate.getMonth() - 1, 1);
                const yearStart = new Date(currentDate.getFullYear()-1, currentDate.getMonth(), currentDate.getDate() - currentDate.getDay() + 4).toISOString().split('T')[0];
                const yearEnd = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - currentDate.getDay() + 4).toISOString().split('T')[0];
                $('#startDate').val(yearStart);
                $('#endDate').val(yearEnd);
                console.log('end',yearEnd);
                console.log('start',yearStart)
            });
            
            $('#weeklyReportButton').click(function () {
                const currentDate = new Date();
                const weekStart = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - currentDate.getDay() - 3).toISOString().split('T')[0];
                const weekEnd = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - currentDate.getDay() + 4).toISOString().split('T')[0];
                $('#startDate').val(weekStart);
                $('#endDate').val(weekEnd);
            });
            $('#todayReportButton').click(function () {
                const currentDate = new Date();
                const dayStart = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - currentDate.getDay()+ 4).toISOString().split('T')[0];
                const dayEnd = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() - currentDate.getDay() + 4).toISOString().split('T')[0];
                $('#startDate').val(dayStart);
                $('#endDate').val(dayEnd);
            });
            
            $('#createReportButton').click(function () {
                $.ajax({
                    url: '/generate-report',
                    type: 'POST',
                    data: {
                        startDate: $('#startDate').val(),
                        endDate: $('#endDate').val()
                    },
                    success: function (response) {
                        console.log(response);
                        $('#reportTableBody').empty();
                        response.reportData.forEach((order, index) => {
                            let productsHTML = '';
                            order.products.forEach(product => {
                                productsHTML += `<li>${product.productName} - ${product.quantity} - ${product.price}</li>`;
                            });
                            let row = `<tr>
                                            <td>${index + 1}</td>
                                            <td>#${order.orderId}</td>
                                            <td>${order.firstName}</td>
                                            <td>${order.address}</td>
                                            <td>${new Date(order.date).toLocaleDateString()}</td>
                                            <td>Rs.${order.totalPrice.toFixed(2)}</td>
                                            <td>${order.paymentStatus}</td>
                                            <td>${order.paymentMethod}</td>
                                            <td><ul>${productsHTML}</ul></td>
                                        </tr>`;
                            $('#reportTableBody').append(row);
                        });
                        $('#reportContainer').show();
                        $('#downloadButton').show();
                        $('#downloadExcelButton').show();
                    },
                    error: function (xhr, status, error) {
                        console.error(error);
                    }
                });
            });
        });

        function downloadPdf() {
            html2canvas(document.getElementById("reportContainer")).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jspdf.jsPDF({
                    orientation: "landscape",
                    unit: "pt",
                    format: [canvas.width, canvas.height]
                });
                const imgHeight = (canvas.width / pdf.internal.pageSize.getWidth()) * pdf.internal.pageSize.getHeight();
                pdf.addImage(imgData, 'PNG',  (pdf.internal.pageSize.getWidth() - canvas.width) / 2, 10, canvas.width , imgHeight);
                
                pdf.save("report.pdf");
            });

        }





        function downloadExcel() {
            const element = document.getElementById('reportTableBody');
            const wb = XLSX.utils.table_to_book(element);
            XLSX.writeFile(wb, 'report.xlsx');
        }
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.4/xlsx.full.min.js"></script>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
          const initialData = {
            cod: 0,
            razorPay: 0,
            wallet: 0
            };
        
            
            const orderCtx = document.getElementById('orderChart').getContext('2d');
            const orderChart = new Chart(orderCtx, {
                type: 'doughnut',
                data: {
                labels: ['Cod', 'RazorPay', 'Wallet'],
                datasets: [{
                    data: Object.values(initialData),
                    backgroundColor: [
                    'rgba(255, 99, 132, 0.7)',
                    'rgba(255, 205, 86, 0.7)',
                    'rgba(54, 162, 235, 0.7)',
                    'rgba(75, 192, 192, 0.7)',
                    'rgba(255, 64, 64, 0.7)',
                    ],
                }],
                },
                options: {
                title: {
                    display: true,
                    text: 'Order Statistics by Status',
                },
                plugins: {
                    legend: {
                    labels: {
                        color: 'orange',
                    },
                    },
                },
                },
            });
        
            function updateChartData(data) {
                orderChart.data.datasets[0].data = Object.values(data);
                orderChart.update();
            }
        
            function fetchDataAndUpdateChart() {
                fetch('/fetchdashboard')
                .then(response => response.json())
                .then(data => {
                    updateChartData(data.ordersPie);
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
            }
        
            fetchDataAndUpdateChart();
        
            function updateGraphWithMonthlyData() {
                const existingChart = Chart.getChart('lineChart');
        if (existingChart) {
            existingChart.destroy();
        }
            const months = '<%- JSON.stringify(ordersGraph.labels) %>';
            const counts = '<%- JSON.stringify(ordersGraph.count) %>';
        
        
            const parsedMonths = JSON.parse(months);
            const parsedCounts = JSON.parse(counts);
        
        
            const countsWithNull = new Array(parsedMonths.length).fill(null);
        
        
            parsedMonths.forEach((month, index) => {
            const monthIndex = parsedMonths.indexOf(month);
            if (monthIndex !== -1) {
                countsWithNull[monthIndex] = parsedCounts[index];
            }
            });
        
            const lineCtx = document.getElementById('lineChart').getContext('2d');
            const lineChart = new Chart(lineCtx, {
            type: 'line',
            data: {
                labels: parsedMonths,
                datasets: [{
                label: 'Orders by Month',
                data: countsWithNull,
                borderColor: 'rgba(54, 162, 235, 1)',
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                fill: true,
                }],
            },
            options: {
                title: {
                display: true,
                text: 'Orders by Month',
                },
                scales: {
                x: {
                    type: 'category', 
                    position: 'bottom',
                },
                y: {
                    type: 'linear', 
                    ticks: {
                    stepSize: 1, 
                    beginAtZero: true, 
                    },
                },
                },
                plugins: {
                legend: {
                    labels: {
                    color: 'orange', 
                    },
                },
                },
            },
            });
        }
            function updateYearGraph() {
            const existingChart = Chart.getChart('lineChart');
        if (existingChart) {
            existingChart.destroy();
        }
            const years = '<%- JSON.stringify(ordersYearGraph.labels) %>';
            const counts = '<%- JSON.stringify(ordersYearGraph.count) %>';
        
        
            const parsedYears = JSON.parse(years);
            const parsedCounts = JSON.parse(counts);
            const minYear = Math.min(...parsedYears);
            const maxYear = Math.max(...parsedYears);
        
        const yearsToShow = [];
        for (let i = minYear-3; i <= maxYear+3; i++) {
        yearsToShow.push(i);
        }
        console.log('yearsToShow:', yearsToShow);
            const countsWithNull = new Array(yearsToShow.length).fill(null);
        
            
            parsedYears.forEach((year, index) => {
        const yearIndex = yearsToShow.indexOf(parseInt(year));
        if (yearIndex !== -1) {
            countsWithNull[yearIndex] = parsedCounts[index];
        }
        });
        console.log('countsWithNull:', countsWithNull);
        
            const lineCtx = document.getElementById('lineChart').getContext('2d');
            const lineChart = new Chart(lineCtx, {
            type: 'line',
            data: {
                labels: yearsToShow,
                datasets: [{
                label: 'Orders by Years',
                data: countsWithNull,
                borderColor: 'rgba(54, 162, 235, 1)',
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                fill: true,
                }],
            },
            options: {
                title: {
                display: true,
                text: 'Orders by Years',
                },
                scales: {
                x: {
                    type: 'category', 
                    position: 'bottom',
                },
                y: {
                        type: 'linear',
                        beginAtZero: true, 
                        ticks: {
                            stepSize: 1,
                        },
                    },
                },
                plugins: {
                legend: {
                    labels: {
                    color: 'orange', 
                    },
                },
                },
            },
            });
        }
        
        const monthGraphBtn = document.getElementById('monthGraphBtn');
        const yearGraphBtn = document.getElementById('yearGraphBtn');
        
        monthGraphBtn.addEventListener('click', function () {
            
            updateGraphWithMonthlyData();
            
            monthGraphBtn.classList.add('active');
            yearGraphBtn.classList.remove('active');
        });
        
        yearGraphBtn.addEventListener('click', function () {
            
            updateYearGraph();
        
            
            yearGraphBtn.classList.add('active');
            monthGraphBtn.classList.remove('active');
        });
        
        updateGraphWithMonthlyData();
        })   
    </script>
    <script>
        const startDateInput = document.getElementById('startDate');
        const endDateInput = document.getElementById('endDate');
        const dateErrorSpan = document.getElementById('dateError');
    
        startDateInput.addEventListener('change', validateDates);
        endDateInput.addEventListener('change', validateDates);
    
        function validateDates() {
            const startDate = new Date(startDateInput.value);
            const endDate = new Date(endDateInput.value);
    
            // Reset error message
            dateErrorSpan.textContent = '';
    
    
            if (endDate < startDate || endDate > new Date() || startDate > new Date() || startDate > endDate)  {
                dateErrorSpan.textContent = 'Invalid details. Choose correct date';
                endDateInput.value = '';
            } 
    
            // Hide error message after 3 seconds
            setTimeout(() => {
                dateErrorSpan.textContent = '';
            }, 3000);
        }
    </script>
    

    

    
</body>


</html>